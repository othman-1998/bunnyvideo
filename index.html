<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- gsap script -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>

    <!-- ScrollTrigger -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>

    <!-- shaka player script -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.4.0/shaka-player.compiled.js"></script>

    <style>
        body, html {
            margin: 0;
            padding: 0;
        }
        .iframe-container {
            position: relative;
            width: 100%;
            height: 100vh; 
            border: 0;
        }
        video#video {
            object-fit: cover !important;
            width: 100% !important;
            height: 100% !important;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1; /* Sørger for, at video1 er i baggrunden */
        }
    </style>

</head>
<body>

    <div class="iframe-container">

        <video 
            id="video" 
            autoplay 
            muted 
            playsinline 
            loop
            poster="https://vz-17fca31c-e5c.b-cdn.net/d519e7a3-9904-41cd-97f3-40493e34e1e5/thumbnail.jpg"
        >

        </video>

        <!-- <video 
            id="video2" 
            autoplay 
            muted 
            playsinline 
            loop
        >
        </video> -->

    </div>
    
    <script>
        async function initShakaPlayer() {
    const formatTimestamp = () => new Date().toISOString();

    // Første video element
    const video = document.getElementById('video');
    const player = new shaka.Player(video);

    player.addEventListener('error', (event) => {
        console.error(`[${formatTimestamp()}] Shaka Player Error:`, event.detail);
    });

    video.addEventListener('loadedmetadata', () => {
        console.log(`Video 1 varighed: ${video.duration} sekunder`);
    });

    try {
        const videoUrl = 'https://vz-17fca31c-e5c.b-cdn.net/d519e7a3-9904-41cd-97f3-40493e34e1e5/playlist.m3u8';

        const startTime = Date.now();
        console.log(`${formatTimestamp()} - Starter indlæsning af video...`);

        await player.load(videoUrl);

        const loadTime = Date.now() - startTime;
        console.log(`${formatTimestamp()} - Videoen er indlæst og klar!`);
        console.log(`Tid brugt på at indlæse video: ${loadTime} ms`);

        // Overvåg progress for kun den første video
        let hasLogged25Percent = false;
        let hasLogged50Percent = false;
        let hasLogged75Percent = false;
        let hasLogged3Seconds = false;

        video.addEventListener('timeupdate', () => {
            const currentTime = video.currentTime;
            const progress = video.currentTime / video.duration;

            if (!hasLogged3Seconds && currentTime >= 3) {
                hasLogged3Seconds = true;
                console.log("Video 1 har nået 3 sekunder!");
            }

            if (!hasLogged25Percent && progress >= 0.25) {
                hasLogged25Percent = true;
                console.log("Video 1 har nået 25%!");
            } else if (!hasLogged50Percent && progress >= 0.50) {
                hasLogged50Percent = true;
                console.log("video 1 har nået 50%");
            } else if(!hasLogged75Percent && progress >= 0.75) {
                hasLogged75Percent = true;
                console.log("video 1 har nået 75%");
            }
        });
    } catch (error) {
        console.error(`${formatTimestamp()} - Fejl ved indlæsning af video:`, error);
    }

}

document.addEventListener('DOMContentLoaded', initShakaPlayer);

    </script>
    
</body>
</html>
